# Figma 原型文件结构和交互规范

本文档详细说明 Knowledge Studio 的 Figma 文件组织结构、原型交互流程和具体的交互规范。

---

## 📁 Figma 文件结构

### 文件名称
**Knowledge Studio - Design System & Prototype**

### 页面结构

```
Knowledge Studio - Design System & Prototype
│
├── 📐 1. Design System
│   ├── Colors (颜色系统展示板)
│   ├── Typography (字体系统展示板)
│   ├── Spacing & Grid (间距和网格系统)
│   ├── Effects (阴影和效果)
│   └── Icons (图标库)
│
├── 🧩 2. Components
│   ├── Atoms
│   │   ├── Button (所有变体)
│   │   ├── Input (所有变体)
│   │   ├── Badge (所有变体)
│   │   ├── Avatar (所有变体)
│   │   ├── Checkbox, Radio, Switch
│   │   └── Icon, Divider, Spinner
│   │
│   ├── Molecules
│   │   ├── ConversationCard
│   │   ├── MessageBubble
│   │   ├── KnowledgePointMarker
│   │   ├── SearchBar
│   │   ├── TagSelector
│   │   ├── ModelSelector
│   │   └── Tooltip, Dropdown, EmptyState
│   │
│   └── Organisms
│       ├── Sidebar
│       ├── ChatInterface
│       ├── KnowledgePanel
│       ├── KnowledgeExplorer
│       └── SettingsPanel
│
├── 🖥️ 3. Screens - Light Mode
│   ├── 01. Welcome Screen
│   ├── 02. Main Interface (Default)
│   ├── 03. Main Interface (With Knowledge Points)
│   ├── 04. Main Interface (Sidebar Collapsed)
│   ├── 05. Knowledge Explorer
│   ├── 06. Knowledge Management
│   ├── 07. Settings - API Keys
│   ├── 08. Settings - Models
│   ├── 09. Settings - Appearance
│   └── 10. Empty States
│
├── 🌙 4. Screens - Dark Mode
│   ├── (相同的页面结构,暗色主题)
│   └── ...
│
├── 🔗 5. Interactive Prototype
│   ├── Flow 1: 新用户引导流程
│   ├── Flow 2: 创建对话流程
│   ├── Flow 3: 知识点标注流程
│   ├── Flow 4: 深入探索流程
│   ├── Flow 5: 查看探索链流程
│   ├── Flow 6: 知识管理流程
│   └── Flow 7: 设置配置流程
│
├── 📱 6. Responsive Layouts
│   ├── 1024×768 (最小尺寸)
│   ├── 1280×800 (推荐尺寸)
│   └── 1920×1080 (大屏幕)
│
└── 📝 7. Documentation
    ├── Component Usage Guide
    ├── Interaction Patterns
    ├── Design Tokens Export
    └── Developer Handoff Notes
```

---

## 🎨 Design System 页面详细结构

### 1.1 Colors 画板

```
┌─────────────────────────────────────────────────────────────┐
│ Color System                                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ Primary Colors                                              │
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                │
│ │ 50 │ │100 │ │500 │ │600 │ │700 │ │900 │                │
│ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘                │
│ #eef2ff #e0e7ff #6366f1 #4f46e5 #4338ca #312e81          │
│                                                             │
│ Neutral Colors                                              │
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ │
│ │ 50 │ │100 │ │200 │ │300 │ │500 │ │700 │ │800 │ │900 │ │
│ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ │
│                                                             │
│ Semantic Colors                                             │
│ Success    ┌────┐ ┌────┐ ┌────┐                           │
│            │ 50 │ │500 │ │700 │                           │
│            └────┘ └────┘ └────┘                           │
│                                                             │
│ Warning    ┌────┐ ┌────┐ ┌────┐                           │
│            │ 50 │ │500 │ │700 │                           │
│            └────┘ └────┘ └────┘                           │
│                                                             │
│ Error      ┌────┐ ┌────┐ ┌────┐                           │
│            │ 50 │ │500 │ │700 │                           │
│            └────┘ └────┘ └────┘                           │
│                                                             │
│ Info       ┌────┐ ┌────┐ ┌────┐                           │
│            │ 50 │ │500 │ │700 │                           │
│            └────┘ └────┘ └────┘                           │
│                                                             │
│ Model Colors                                                │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐          │
│ │ OpenAI  │ │Anthropic│ │ Google  │ │ Ollama  │          │
│ │#10a37f  │ │ #d4764a │ │ #4285f4 │ │ #8b5cf6 │          │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘          │
│                                                             │
│ Color Usage Examples                                        │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 🔵 Primary: 主要操作按钮、链接、选中状态            │   │
│ │ ⚪ Neutral: 文本、边框、背景                        │   │
│ │ ✅ Success: 成功提示、已掌握知识点                  │   │
│ │ ⚠️  Warning: 警告提示、部分理解知识点               │   │
│ │ ❌ Error: 错误提示、不理解知识点                    │   │
│ │ ℹ️  Info: 信息提示、帮助文本                        │   │
│ └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 Typography 画板

```
┌─────────────────────────────────────────────────────────────┐
│ Typography System                                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ Headings                                                    │
│                                                             │
│ Heading 1   知识探索工作室 (32px/40px Bold)                │
│                                                             │
│ Heading 2   核心功能 (24px/32px Semibold)                  │
│                                                             │
│ Heading 3   对话管理 (20px/28px Semibold)                  │
│                                                             │
│ Heading 4   知识点列表 (18px/24px Medium)                  │
│                                                             │
│ Heading 5   操作说明 (16px/24px Medium)                    │
│                                                             │
│ Body Text                                                   │
│                                                             │
│ Body Large  这是正文大字体,用于重要内容 (16px/24px)       │
│                                                             │
│ Body Medium 这是正文中等字体,用于常规内容 (14px/20px)     │
│                                                             │
│ Body Small  这是正文小字体,用于次要内容 (13px/18px)       │
│                                                             │
│ Body XSmall 这是正文超小字体,用于辅助信息 (12px/16px)     │
│                                                             │
│ Special Styles                                              │
│                                                             │
│ Code       const greeting = "Hello World"; (14px/20px Mono)│
│                                                             │
│ Caption    补充说明文字 (12px/16px Regular)                │
│                                                             │
│ Label      表单标签 (14px/20px Medium)                     │
│                                                             │
│ Font Stack                                                  │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ Primary: -apple-system, BlinkMacSystemFont,         │   │
│ │          "Segoe UI", Roboto, sans-serif             │   │
│ │ Code:    "JetBrains Mono", "Fira Code", monospace  │   │
│ └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 1.3 Spacing & Grid 画板

```
┌─────────────────────────────────────────────────────────────┐
│ Spacing System (8px Base)                                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ spacing-1   ┌──┐  4px   (0.5 × 8)                          │
│ spacing-2   ┌────┐  8px   (1 × 8)                          │
│ spacing-3   ┌──────┐  12px  (1.5 × 8)                      │
│ spacing-4   ┌────────┐  16px  (2 × 8)                      │
│ spacing-5   ┌──────────┐  20px  (2.5 × 8)                  │
│ spacing-6   ┌────────────┐  24px  (3 × 8)                  │
│ spacing-8   ┌────────────────┐  32px  (4 × 8)              │
│ spacing-10  ┌────────────────────┐  40px  (5 × 8)          │
│ spacing-12  ┌────────────────────────┐  48px  (6 × 8)      │
│ spacing-16  ┌────────────────────────────────┐  64px (8×8) │
│                                                             │
│ Layout Grid (12 Columns)                                    │
│ ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐        │
│ │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │ 8 │ 9 │10 │11 │12 │        │
│ └───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘        │
│ Column: 72px  Gutter: 24px  Margin: 24px                   │
│                                                             │
│ Common Spacing Usage                                        │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ • 4px:  图标与文字间距                              │   │
│ │ • 8px:  组件内元素间距                              │   │
│ │ • 16px: 组件之间间距                                │   │
│ │ • 24px: 区块之间间距                                │   │
│ │ • 32px: 大区块间距                                  │   │
│ │ • 48px: 页面顶部/底部间距                           │   │
│ └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

---

## 🧩 Components 页面详细结构

### 2.1 Atoms - Button 组件变体表

```
Button Component Variants
─────────────────────────────────────────────────────────────

Type: Primary
┌──────────────┬──────────────┬──────────────┬──────────────┐
│   Default    │    Hover     │   Active     │   Disabled   │
├──────────────┼──────────────┼──────────────┼──────────────┤
│  [发送消息]  │  [发送消息]  │  [发送消息]  │  [发送消息]  │
│ bg:#6366f1   │ bg:#4f46e5   │ bg:#4338ca   │ bg:#d1d5db   │
│ text:white   │ text:white   │ text:white   │ text:#9ca3af │
└──────────────┴──────────────┴──────────────┴──────────────┘

Type: Secondary
┌──────────────┬──────────────┬──────────────┬──────────────┐
│   Default    │    Hover     │   Active     │   Disabled   │
├──────────────┼──────────────┼──────────────┼──────────────┤
│   [取消]     │   [取消]     │   [取消]     │   [取消]     │
│ border:#e5e7eb│border:#d1d5db│border:#6366f1│border:#e5e7eb│
│ text:#374151 │ text:#111827 │ text:#6366f1 │ text:#d1d5db │
└──────────────┴──────────────┴──────────────┴──────────────┘

Type: Ghost
┌──────────────┬──────────────┬──────────────┬──────────────┐
│   Default    │    Hover     │   Active     │   Disabled   │
├──────────────┼──────────────┼──────────────┼──────────────┤
│   [更多]     │   [更多]     │   [更多]     │   [更多]     │
│ bg:transparent│bg:#f3f4f6   │ bg:#e5e7eb   │ bg:transparent│
│ text:#6b7280 │ text:#374151 │ text:#111827 │ text:#d1d5db │
└──────────────┴──────────────┴──────────────┴──────────────┘

Type: Destructive
┌──────────────┬──────────────┬──────────────┬──────────────┐
│   Default    │    Hover     │   Active     │   Disabled   │
├──────────────┼──────────────┼──────────────┼──────────────┤
│   [删除]     │   [删除]     │   [删除]     │   [删除]     │
│ bg:#ef4444   │ bg:#dc2626   │ bg:#b91c1c   │ bg:#fca5a5   │
│ text:white   │ text:white   │ text:white   │ text:#fee2e2 │
└──────────────┴──────────────┴──────────────┴──────────────┘

Size Variants
┌─────────────┬─────────────┬─────────────┐
│    Small    │   Medium    │    Large    │
├─────────────┼─────────────┼─────────────┤
│  [确定]     │  [确定]     │  [确定]     │
│ 32px height │ 40px height │ 48px height │
│ 8px 16px    │ 12px 24px   │ 16px 32px   │
└─────────────┴─────────────┴─────────────┘

With Icons
┌──────────────┬──────────────┬──────────────┐
│  Left Icon   │  Right Icon  │  Icon Only   │
├──────────────┼──────────────┼──────────────┤
│ [➕ 新对话]  │ [发送 ➡️]   │    [⚙️]     │
└──────────────┴──────────────┴──────────────┘
```

### 2.2 Molecules - ConversationCard 组件

```
ConversationCard Component
─────────────────────────────────────────────────────────────
Width: 224px (固定)  Padding: 12px  Gap: 8px

Default State
┌──────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────────┐  │
│ │ 🤖 GPT-4              14:32          •••            │  │
│ ├─────────────────────────────────────────────────────┤  │
│ │ React 性能优化最佳实践                              │  │
│ ├─────────────────────────────────────────────────────┤  │
│ │ 讨论了 React.memo、useMemo 和虚拟列表等性能优化... │  │
│ ├─────────────────────────────────────────────────────┤  │
│ │ [技术] [React] [性能]                      📍 3     │  │
│ └─────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────┘

Hover State
┌──────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────────┐  │
│ │ 🤖 GPT-4              14:32          •••            │  │◄─┐
│ ├─────────────────────────────────────────────────────┤  │  │ bg:#f9fafb
│ │ React 性能优化最佳实践                              │  │  │ shadow:sm
│ ├─────────────────────────────────────────────────────┤  │  │
│ │ 讨论了 React.memo、useMemo 和虚拟列表等性能优化... │  │  │
│ ├─────────────────────────────────────────────────────┤  │  │
│ │ [技术] [React] [性能]                      📍 3     │  │  │
│ └─────────────────────────────────────────────────────┘  │◄─┘
└──────────────────────────────────────────────────────────┘

Selected State
┌──────────────────────────────────────────────────────────┐
│▌┌────────────────────────────────────────────────────┐   │◄─ 左侧 4px
│▌│ 🤖 GPT-4              14:32          •••           │   │  Primary/500
│▌├────────────────────────────────────────────────────┤   │  边框
│▌│ React 性能优化最佳实践                             │   │
│▌├────────────────────────────────────────────────────┤   │  bg:#eef2ff
│▌│ 讨论了 React.memo、useMemo 和虚拟列表等性能优化..│   │  (Primary/50)
│▌├────────────────────────────────────────────────────┤   │
│▌│ [技术] [React] [性能]                      📍 3    │   │
│▌└────────────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────┘

Component Structure (Auto Layout)
┌─────────────────────────────────────────────────────────┐
│ ConversationCard (Vertical, Gap:8px, Padding:12px)     │
│ ├─ Header (Horizontal, Gap:8px, Space Between)         │
│ │  ├─ ModelIcon (20×20)                                │
│ │  ├─ ModelName (Body/Small, Flex:1)                   │
│ │  ├─ Time (Caption, color:Neutral/500)                │
│ │  └─ MenuButton (20×20, Ghost)                        │
│ ├─ Title (Body/Medium, Medium, Max 2 lines)            │
│ ├─ Preview (Body/Small, color:Neutral/600, Max 2 lines)│
│ └─ Footer (Horizontal, Gap:8px, Space Between)         │
│    ├─ Tags (Horizontal, Gap:4px, Wrap)                 │
│    │  └─ Badge × N                                     │
│    └─ KnowledgeCount (Caption, color:Neutral/500)      │
│       "📍 3"                                            │
└─────────────────────────────────────────────────────────┘
```

### 2.3 Molecules - MessageBubble 组件

```
MessageBubble Component
─────────────────────────────────────────────────────────────

User Message (Right-aligned)
┌──────────────────────────────────────────────────────────┐
│                                                          │
│                        ┌──────────────────────────────┐  │
│                        │ 👤 你  14:30                 │  │
│                        ├──────────────────────────────┤  │
│                        │ 如何优化 React 应用的性能?   │  │
│                        │                              │  │
│                        ├──────────────────────────────┤  │
│                        │ [📋]  [🔖]                   │  │
│                        └──────────────────────────────┘  │
│                        bg:#6366f1  text:white            │
└──────────────────────────────────────────────────────────┘

AI Message (Left-aligned)
┌──────────────────────────────────────────────────────────┐
│  ┌──────────────────────────────────────────────────┐    │
│  │ 🤖 GPT-4  14:30                                  │    │
│  ├──────────────────────────────────────────────────┤    │
│  │ React 性能优化有以下几个重要方向:                │    │
│  │                                                  │    │
│  │ 1. 使用 【React.memo()】❓ 避免不必要的重渲染   │    │
│  │ 2. 使用 【useMemo】⚠️ 缓存计算结果              │    │
│  │ 3. 使用 【虚拟列表】✅ 处理大量数据              │    │
│  │                                                  │    │
│  │ 【...】标注表示知识点,带颜色边框和图标          │    │
│  │                                                  │    │
│  ├──────────────────────────────────────────────────┤    │
│  │ [📋 复制]  [🔖 标注]  [🔄 重新生成]             │    │
│  └──────────────────────────────────────────────────┘    │
│  bg:#f9fafb  text:#111827  border:#e5e7eb                │
└──────────────────────────────────────────────────────────┘

Knowledge Point Annotation States
┌─────────────────────────────────────────────────────────┐
│ 【React.memo()】❓                                      │
│  ▔▔▔▔▔▔▔▔▔▔▔▔▔                                        │
│  border-bottom: 2px solid #ef4444 (Error/500)          │
│  color: #ef4444                                        │
│  icon: ❓ (不理解)                                      │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ 【useMemo】⚠️                                           │
│  ▔▔▔▔▔▔▔▔                                              │
│  border-bottom: 2px solid #f59e0b (Warning/500)        │
│  color: #f59e0b                                        │
│  icon: ⚠️ (部分理解)                                    │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ 【虚拟列表】✅                                          │
│  ▔▔▔▔▔▔                                                │
│  border-bottom: 2px solid #22c55e (Success/500)        │
│  color: #22c55e                                        │
│  icon: ✅ (已掌握)                                      │
└─────────────────────────────────────────────────────────┘

Component Structure (Auto Layout)
┌─────────────────────────────────────────────────────────┐
│ MessageBubble (Vertical, Gap:8px, Padding:16px)        │
│ ├─ Header (Horizontal, Gap:8px)                        │
│ │  ├─ Avatar (32×32)                                   │
│ │  ├─ Name (Body/Small, Medium)                        │
│ │  └─ Time (Caption, color:Neutral/500)                │
│ ├─ Content (Body/Medium, line-height:1.6)              │
│ │  └─ Text with inline KnowledgePointMarker            │
│ └─ Actions (Horizontal, Gap:12px, Opacity:0→1 on hover)│
│    ├─ CopyButton (Ghost, Small)                        │
│    ├─ AnnotateButton (Ghost, Small)                    │
│    └─ RegenerateButton (Ghost, Small, AI only)         │
└─────────────────────────────────────────────────────────┘
```

### 2.4 Organisms - Sidebar 组件

```
Sidebar Component
─────────────────────────────────────────────────────────────
Width: 240px (Expanded) / 64px (Collapsed)
Height: 100vh

Expanded State
┌─────────────────────────────────┐
│  Knowledge Studio               │ ← Logo (32px height)
├─────────────────────────────────┤
│  [🔍 搜索对话... Cmd+K]         │ ← SearchBar
├─────────────────────────────────┤
│  [➕ 新对话        Cmd+N]       │ ← New Conversation Button
├─────────────────────────────────┤
│                                 │
│  📁 技术研究 ▼                  │ ← Project Folder (Expanded)
│    ┌─────────────────────────┐ │
│    │ 🤖 React 性能优化       │ │ ← ConversationCard
│    │ GPT-4  14:30      📍 3  │ │
│    └─────────────────────────┘ │
│    ┌─────────────────────────┐ │
│    │ 🤖 TypeScript 类型体操  │ │
│    │ Claude  昨天      📍 7  │ │
│    └─────────────────────────┘ │
│                                 │
│  📁 产品设计 ▶                  │ ← Project Folder (Collapsed)
│                                 │
│  📁 个人学习 ▼                  │
│    ┌─────────────────────────┐ │
│    │ 🤖 机器学习基础         │ │
│    │ Gemini  3天前    📍 12  │ │
│    └─────────────────────────┘ │
│                                 │
│  ⋮ (Scrollable)                 │
│                                 │
├─────────────────────────────────┤ ← Divider
│  [👤 张三]            [⚙️]     │ ← User Section
└─────────────────────────────────┘

Collapsed State
┌──────┐
│  KS  │ ← Logo (Abbreviated)
├──────┤
│  🔍  │ ← Search Icon (Tooltip: "搜索 Cmd+K")
├──────┤
│  ➕  │ ← New Conversation (Tooltip: "新对话 Cmd+N")
├──────┤
│      │
│  📁  │ ← Project Icons only
│      │
│  📁  │
│      │
│  📁  │
│      │
│  ⋮   │
│      │
├──────┤
│  👤  │ ← User Avatar
│  ⚙️  │ ← Settings
└──────┘

Component Structure (Auto Layout)
┌─────────────────────────────────────────────────────────┐
│ Sidebar (Vertical, Gap:0, bg:Neutral/50)               │
│ ├─ Header (Padding:16px)                               │
│ │  └─ Logo                                             │
│ ├─ SearchSection (Padding:16px)                        │
│ │  └─ SearchBar                                        │
│ ├─ NewConversation (Padding:16px)                      │
│ │  └─ Button (Primary, Full Width)                    │
│ ├─ Divider                                             │
│ ├─ ProjectList (Vertical, Gap:8px, Padding:16px, Flex:1)│
│ │  └─ ProjectFolder × N (Collapsible)                 │
│ │     └─ ConversationCard × N                         │
│ ├─ Divider                                             │
│ └─ Footer (Padding:16px, Horizontal, Space Between)    │
│    ├─ UserProfile (Horizontal, Gap:8px)                │
│    │  ├─ Avatar (32×32)                                │
│    │  └─ Name (Body/Small, Show in Expanded only)     │
│    └─ SettingsButton (Ghost, 32×32)                   │
└─────────────────────────────────────────────────────────┘

Interactions
• Click Logo → Navigate to Welcome Screen
• Click Search → Focus input, show recent searches
• Click New Conversation → Create new conversation, navigate to it
• Click Project Folder → Toggle expand/collapse
• Click ConversationCard → Navigate to conversation
• Drag ConversationCard → Move to different project
• Click Settings → Open Settings Panel
• Hover Sidebar Edge → Show resize cursor
• Drag Sidebar Edge → Resize (min:180px, max:320px)
• Click Collapse Button → Toggle collapsed state
```

---

## 🖥️ Screens 页面详细结构

### 3.1 Main Interface (With Knowledge Points)

```
Main Interface - Complete Layout
────────────────────────────────────────────────────────────────────────────────────────
Window: 1440×900  (推荐尺寸)

┌──────────────┬────────────────────────────────────────────────┬──────────────────┐
│              │                                                │                  │
│   Sidebar    │            Chat Interface                      │ Knowledge Panel  │
│   240px      │               960px                            │      240px       │
│              │                                                │                  │
│ ┌──────────┐ │ ┌────────────────────────────────────────────┐ │ ┌──────────────┐ │
│ │ KS Logo  │ │ │ React 性能优化   🤖 GPT-4 ▼  [⋯] [↗] [🗑]│ │ │ 📍 🔗 📊    │ │
│ └──────────┘ │ └────────────────────────────────────────────┘ │ └──────────────┘ │
│ ┌──────────┐ │ ┌────────────────────────────────────────────┐ │                  │
│ │ 🔍 搜索  │ │ │  🤖 GPT-4  14:30                          │ │ ❓ 不理解 (2)   │
│ └──────────┘ │ │  React 性能优化有以下几个重要方向:         │ │ ┌──────────────┐ │
│ ┌──────────┐ │ │                                            │ │ │ React.memo() │ │
│ │➕ 新对话 │ │ │  1. 使用【React.memo()】❓                │ │ │ 来自: GPT-4  │ │
│ └──────────┘ │ │     可以避免不必要的组件重渲染             │ │ │ 14:30        │ │
│ ─────────── │ │                                            │ │ │ [深入探索 →] │ │
│              │ │  2. 使用【useMemo】⚠️                     │ │ └──────────────┘ │
│ 📁 技术 ▼   │ │     缓存昂贵的计算结果...                  │ │ ┌──────────────┐ │
│ ┌──────────┐ │ │                                            │ │ │ 虚拟列表实现 │ │
│ │🤖 React  │ │ │  3. 使用【虚拟列表】✅                    │ │ │ 来自: GPT-4  │ │
│ │性能优化  │ │ │     处理大量数据时只渲染可见项...          │ │ │ 14:32        │ │
│ │📍 3      │◀│ │                                            │ │ │ [深入探索 →] │ │
│ └──────────┘ │ │  [📋 复制]  [🔖 标注]  [🔄 重新生成]      │ │ └──────────────┘ │
│ ┌──────────┐ │ └────────────────────────────────────────────┘ │                  │
│ │🤖 TS类型 │ │ ┌────────────────────────────────────────────┐ │ ⚠️ 学习中 (1)   │
│ │体操      │ │ │  👤 你  14:35                             │ │ ┌──────────────┐ │
│ │📍 7      │ │ │  能详细解释一下 React.memo 的工作原理吗? │ │ │ useMemo      │ │
│ └──────────┘ │ │                                            │ │ │ 来自: GPT-4  │ │
│              │ │  [📋]  [🔖]                                │ │ │ 14:30        │ │
│ 📁 产品 ▶   │ └────────────────────────────────────────────┘ │ │ [深入探索 →] │ │
│              │ ┌────────────────────────────────────────────┐ │ └──────────────┘ │
│ 📁 个人 ▼   │ │  🤖 GPT-4  14:35                          │ │                  │
│ ┌──────────┐ │ │  React.memo 是一个高阶组件 HOC...         │ │ ✅ 已掌握 (1)   │
│ │🤖 ML基础 │ │ │                                            │ │ ┌──────────────┐ │
│ │📍 12     │ │ │  ⋮                                         │ │ │ 虚拟列表     │ │
│ └──────────┘ │ │  [正在生成...]                             │ │ │ 来自: GPT-4  │ │
│              │ └────────────────────────────────────────────┘ │ │ 14:31        │ │
│  ⋮           │                                                │ │ [查看详情]   │ │
│              │ ┌────────────────────────────────────────────┐ │ └──────────────┘ │
│ ─────────── │ │ [✨ 请输入你的问题...]                     │ │                  │
│ [👤 张三]    │ │ [📎] [💬] [🎨]              [发送 ➡️]    │ │ [清空所有]      │
│        [⚙️]  │ └────────────────────────────────────────────┘ │                  │
└──────────────┴────────────────────────────────────────────────┴──────────────────┘

Key Features Highlighted:
• 左侧边栏: 项目文件夹可展开/折叠,当前对话高亮
• 中央聊天区: 消息气泡,知识点标注(三种颜色状态)
• 右侧知识面板: 按理解状态分组,可直接探索
• 底部输入框: 多功能工具栏,支持附件和格式化
```

### 3.2 Welcome Screen

```
Welcome Screen
────────────────────────────────────────────────────────────────────────────────────────
Window: 1440×900

┌──────────────┬────────────────────────────────────────────────────────────────────┐
│              │                                                                    │
│   Sidebar    │                      Welcome Content                               │
│   240px      │                                                                    │
│              │                                                                    │
│ ┌──────────┐ │                                                                    │
│ │ KS Logo  │ │                                                                    │
│ └──────────┘ │                  ┌────────────────────────────────┐               │
│ ┌──────────┐ │                  │                                │               │
│ │ 🔍 搜索  │ │                  │    🧠 Knowledge Studio         │               │
│ └──────────┘ │                  │                                │               │
│ ┌──────────┐ │                  │  AI 对话 × 知识管理 × 深度探索 │               │
│ │➕ 新对话 │ │                  │                                │               │
│ └──────────┘ │                  │  ┌──────────────────────────┐ │               │
│ ─────────── │                  │  │  [➕ 开始新对话]          │ │               │
│              │                  │  └──────────────────────────┘ │               │
│ [空状态]     │                  └────────────────────────────────┘               │
│              │                                                                    │
│              │                                                                    │
│              │                  快速开始                                          │
│              │                                                                    │
│              │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│              │  │ 💡 技术学习      │  │ 📝 产品设计      │  │ 🎨 创意写作      │  │
│              │  │                 │  │                 │  │                 │  │
│              │  │ 探索新技术栈    │  │ 产品需求分析    │  │ 故事创作辅助    │  │
│              │  │ 深入理解原理    │  │ 用户体验设计    │  │ 文案优化建议    │  │
│              │  │                 │  │                 │  │                 │  │
│              │  │ [选择此模板 →]  │  │ [选择此模板 →]  │  │ [选择此模板 →]  │  │
│              │  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│              │                                                                    │
│              │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│ ─────────── │  │ 🔬 科研助手      │  │ 💼 商业分析      │  │ 🌐 语言学习      │  │
│ [👤 张三]    │  │                 │  │                 │  │                 │  │
│        [⚙️]  │  │ 论文阅读理解    │  │ 市场调研分析    │  │ 外语对话练习    │  │
│              │  │ 实验设计建议    │  │ 竞品分析报告    │  │ 语法纠正指导    │  │
│              │  │                 │  │                 │  │                 │  │
│              │  │ [选择此模板 →]  │  │ [选择此模板 →]  │  │ [选择此模板 →]  │  │
│              │  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│              │                                                                    │
│              │                                                                    │
└──────────────┴────────────────────────────────────────────────────────────────────┘

Component Breakdown:
• Hero Section (Center): Logo + Tagline + CTA Button
• Template Cards (Grid: 3 columns × 2 rows):
  - Card Size: 280×200px
  - Gap: 24px
  - Padding: 24px
  - Hover: Lift effect (translateY:-4px) + Shadow LG
• Empty Sidebar: Show prompt to create first conversation
```

### 3.3 Knowledge Explorer

```
Knowledge Explorer - Exploration Chain View
────────────────────────────────────────────────────────────────────────────────────────
Window: 1440×900

┌──────────────┬────────────────────────────────────────────────────────────────────┐
│              │                                                                    │
│   Sidebar    │                   Knowledge Explorer                               │
│  (Collapsed) │                                                                    │
│    64px      │                                                                    │
│              │ ┌────────────────────────────────────────────────────────────────┐ │
│  ┌────┐     │ │ 首页 > 技术研究 > React 性能优化 > 探索链                      │ │
│  │ KS │     │ └────────────────────────────────────────────────────────────────┘ │
│  └────┘     │                                                                    │
│  ┌────┐     │ ┌─────────────────────┬──────────────────────────────────────────┐ │
│  │ 🔍 │     │ │  探索树             │  对话详情                                │ │
│  └────┘     │ │  (360px)            │                                          │ │
│  ┌────┐     │ ├─────────────────────┼──────────────────────────────────────────┤ │
│  │ ➕ │     │ │                     │                                          │ │
│  └────┘     │ │ 🔵 React 性能优化   │ 🤖 GPT-4  2024-01-15 14:30              │ │
│             │ │   Depth 0 (根对话)  │                                          │ │
│   ⋮         │ │   📍 3 个知识点     │ 如何优化 React 应用的性能?              │ │
│             │ │                     │                                          │ │
│             │ │   ├─❓ React.memo() │ React 性能优化有以下几个重要方向:       │ │
│             │ │   │                 │ 1. 使用 React.memo() ...                │ │
│             │ │   ├─⚠️ useMemo     │ 2. 使用 useMemo ...                     │ │
│             │ │   │                 │ 3. 使用虚拟列表 ...                     │ │
│             │ │   └─✅ 虚拟列表     │                                          │ │
│             │ │                     │ ─────────────────────────────────────── │ │
│             │ │        ↓            │                                          │ │
│             │ │                     │ 能详细解释一下 React.memo 的工作原理吗? │ │
│             │ │ 🔴 React.memo 详解  │                                          │ │
│             │ │   Depth 1           │ React.memo 是一个高阶组件 HOC...        │ │
│             │ │   📍 5 个知识点     │                                          │ │
│             │ │                     │ ⋮                                        │ │
│  ┌────┐     │ │   ├─❓ 浅比较原理   │                                          │ │
│  │ 👤 │     │ │   ├─❓ 自定义比较   │ [📋 复制]  [🔖 标注]                    │ │
│  └────┘     │ │   ├─⚠️ 使用场景    │                                          │ │
│  ┌────┐     │ │   ├─⚠️ 性能陷阱    │ ─────────────────────────────────────── │ │
│  │ ⚙️ │     │ │   └─✅ 最佳实践    │                                          │ │
│  └────┘     │ │                     │ ┌────────────────────────────────────┐ │ │
│             │ │        ↓            │ │ [🚀 继续深入探索]                  │ │ │
│             │ │                     │ │ 这个对话包含 5 个知识点,             │ │ │
│             │ │ 🟠 浅比较原理深入   │ │ 选择一个继续探索:                   │ │ │
│             │ │   Depth 2           │ │ • ❓ 浅比较原理                     │ │ │
│             │ │   📍 3 个知识点     │ │ • ❓ 自定义比较函数                 │ │ │
│             │ │                     │ │ • ⚠️ 使用场景分析                  │ │ │
│             │ │        ↓            │ └────────────────────────────────────┘ │ │
│             │ │                     │                                          │ │
│             │ │ 🟡 对象浅比较算法   │                                          │ │
│             │ │   Depth 3           │                                          │ │
│             │ │   📍 2 个知识点     │                                          │ │
│             │ │                     │                                          │ │
│             │ │                     │                                          │ │
│             │ └─────────────────────┴──────────────────────────────────────────┘ │
│             │                                                                    │
└──────────────┴────────────────────────────────────────────────────────────────────┘

Exploration Tree Visual Rules:
• Root conversation (Depth 0): 🔵 Blue
• Depth 1: 🔴 Red
• Depth 2: 🟠 Orange
• Depth 3: 🟡 Yellow
• Depth 4+: 🟢 Green → 🟣 Purple → 🟤 Brown

• Connection lines: Vertical line (│) and branch (├─, └─)
• Selected conversation: Bold + Background highlight
• Knowledge points: Indented list with status icons
• Click conversation → Load in right panel
• Click knowledge point → Scroll to annotation in right panel
• Click "继续深入探索" → Create new child conversation
```

---

## 🔗 Interactive Prototype - 详细交互流程

### Flow 1: 新用户引导流程

```
Flow 1: First-Time User Onboarding
────────────────────────────────────────────────────────────────

Step 1: Welcome Screen (起点)
┌─────────────────────────────────────────┐
│        🧠 Knowledge Studio              │
│  AI 对话 × 知识管理 × 深度探索          │
│                                         │
│    [➕ 开始新对话] ◄─── Click Here      │
│                                         │
│  快速开始: [模板卡片...]               │
└─────────────────────────────────────────┘
         │
         │ On Click "开始新对话"
         ↓
Step 2: Main Interface (新对话创建)
┌─────────────────────────────────────────┐
│ [无标题对话]  🤖 GPT-4 ▼               │
│                                         │
│ [空状态]                                │
│ 💡 尝试问我任何问题...                  │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ [✨ 请输入你的问题...]  ◄─── Focus  │ │
│ │                        [发送 ➡️]    │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
         │
         │ Type message + Click "发送"
         ↓
Step 3: First AI Response
┌─────────────────────────────────────────┐
│ 🤖 GPT-4  14:30                        │
│ [AI 回复内容...]                        │
│                                         │
│ [📋 复制]  [🔖 标注]  [🔄 重新生成]    │
│            ▲                            │
│            └── Tooltip: "标注知识点"    │
└─────────────────────────────────────────┘
         │
         │ Highlight text in AI response
         ↓
Step 4: Knowledge Point Annotation Menu (Overlay)
┌─────────────────────────────────────────┐
│ "React.memo" ← Selected Text            │
│ ┌─────────────────────────────────────┐ │
│ │ 📍 标注为知识点                     │ │
│ │                                     │ │
│ │ 理解状态:                           │ │
│ │ ( ) ❓ 不理解                       │ │
│ │ ( ) ⚠️ 部分理解                     │ │
│ │ (•) ✅ 已掌握                       │ │
│ │                                     │ │
│ │ [取消]         [确认标注] ◄─ Click  │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
         │
         │ On Click "确认标注"
         ↓
Step 5: Knowledge Panel Updates (Right side slides in)
┌─────────────────────────────────────────┐
│ 📍 知识点 | 🔗 探索链 | 📊 图谱        │
│                                         │
│ ✅ 已掌握 (1)                           │
│ ┌─────────────────────────────────────┐ │
│ │ React.memo                          │ │
│ │ 来自: GPT-4  14:30                  │ │
│ │ [查看详情]  [深入探索 →]            │ │ ◄─ Pulse animation
│ └─────────────────────────────────────┘ │
│                                         │
│ [清空所有]                              │
└─────────────────────────────────────────┘

Animation: Smart Animate, 300ms, Ease Out
Highlight: Knowledge point in message gets colored underline
```

### Flow 2: 创建对话流程

```
Flow 2: Create New Conversation
────────────────────────────────────────────────────────────────

Trigger Option A: Click "新对话" Button in Sidebar
┌─────────────────┐
│ ┌─────────────┐ │
│ │ ➕ 新对话   │ │ ◄─── Click
│ └─────────────┘ │
└─────────────────┘
       │
       ↓
┌─────────────────────────────────────────┐
│ [无标题对话]  🤖 GPT-4 ▼               │ ◄─── New conversation loads
│                                         │      Animation: Dissolve, 200ms
│ [Empty state with input focused]       │
└─────────────────────────────────────────┘

Trigger Option B: Click Template Card in Welcome Screen
┌─────────────────┐
│ 💡 技术学习      │
│                 │
│ 探索新技术栈    │
│ 深入理解原理    │
│                 │
│ [选择此模板 →]  │ ◄─── Click
└─────────────────┘
       │
       ↓
┌─────────────────────────────────────────┐
│ [技术学习]  🤖 GPT-4 ▼                 │ ◄─── Pre-filled title
│                                         │
│ 👤 你  刚刚                             │
│ [预设的启动问题已自动填入...]           │ ◄─── Pre-filled message
│                                         │
│ 🤖 GPT-4  刚刚                          │
│ [AI 开始回复...]                        │
└─────────────────────────────────────────┘

Trigger Option C: Keyboard Shortcut (Cmd+N)
Press Cmd+N anywhere
       │
       ↓
Same result as Option A
```

### Flow 3: 知识点标注流程

```
Flow 3: Annotate Knowledge Point
────────────────────────────────────────────────────────────────

Step 1: Select Text in AI Response
┌─────────────────────────────────────────┐
│ 🤖 GPT-4  14:30                        │
│ React 性能优化有以下几个重要方向:       │
│                                         │
│ 1. 使用 【React.memo()】 可以...       │
│         └──────────┘                    │
│         ▲ Selected text (highlight)     │
└─────────────────────────────────────────┘
       │
       │ On Text Selection (Mouse Up)
       ↓
Step 2: Annotation Tooltip Appears (Overlay, anchored to selection)
┌───────────────────────┐
│ [🔖 标注知识点]       │ ◄─── Click
│ [📋 复制]             │
│ [🔍 搜索相关]         │
└───────────────────────┘
  Position: Above selection
  Animation: Move In (from bottom), 150ms
       │
       │ On Click "标注知识点"
       ↓
Step 3: Annotation Modal (Center Overlay)
┌─────────────────────────────────────────────────────────┐
│  📍 标注知识点                              [✕]         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  选中内容: "React.memo()"                               │
│  ┌─────────────────────────────────────────────────┐   │
│  │ React.memo()                                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  理解状态: *                                            │
│  ┌───────────┐ ┌───────────┐ ┌───────────┐            │
│  │ ❓ 不理解 │ │ ⚠️ 部分   │ │ ✅ 已掌握 │            │
│  │           │ │   理解    │ │           │            │
│  └───────────┘ └───────────┘ └───────────┘            │
│      ▲ Click to select                                 │
│                                                         │
│  备注 (可选):                                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 不太理解 memo 的比较逻辑...                     │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  相关问题 (可选):                                       │
│  ┌─────────────────────────────────────────────────┐   │
│  │ • 什么时候用 memo?                              │   │
│  │ • 和 useMemo 的区别是什么?                      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│                         [取消]  [确认标注]  ◄─ Click   │
└─────────────────────────────────────────────────────────┘
  Width: 560px
  Animation: Dissolve + Scale (0.95→1), 200ms
       │
       │ On Click "确认标注"
       ↓
Step 4: Knowledge Point Created
┌─────────────────────────────────────────┐
│ 🤖 GPT-4  14:30                        │
│ React 性能优化有以下几个重要方向:       │
│                                         │
│ 1. 使用【React.memo()】❓ 可以...      │
│         └──────────┘                    │
│         红色下划线 + ❓ 图标             │
└─────────────────────────────────────────┘
AND
┌─────────────────────────────────────────┐
│ 📍 知识点 | 🔗 探索链 | 📊 图谱        │ ◄─ Right panel updates
│                                         │    Animation: Slide from right, 300ms
│ ❓ 不理解 (1) ← 新增                   │
│ ┌─────────────────────────────────────┐ │
│ │ React.memo()              [🔖]      │ │ ◄─ Pulse effect (2×)
│ │ 来自: GPT-4  14:30                  │ │
│ │ 备注: 不太理解 memo 的比较逻辑...    │ │
│ │ [查看详情]  [深入探索 →]            │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### Flow 4: 深入探索流程

```
Flow 4: Deep Exploration
────────────────────────────────────────────────────────────────

Step 1: Click "深入探索" in Knowledge Panel
┌─────────────────────────────────────────┐
│ ❓ 不理解 (1)                           │
│ ┌─────────────────────────────────────┐ │
│ │ React.memo()                        │ │
│ │ 来自: GPT-4  14:30                  │ │
│ │ [查看详情]  [深入探索 →]            │ │
│ │                          ▲           │ │
│ │                          └─── Click  │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
       │
       ↓
Step 2: Exploration Options Modal (Center Overlay)
┌─────────────────────────────────────────────────────────┐
│  🚀 深入探索: React.memo()                  [✕]         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  选择探索方向:                                          │
│                                                         │
│  ┌───────────────────────────────────────────────────┐ │
│  │ ( ) 💡 基础概念解释                              │ │
│  │     "详细解释 React.memo 是什么以及工作原理"       │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  ┌───────────────────────────────────────────────────┐ │
│  │ ( ) 📝 实际应用示例                              │ │
│  │     "展示 React.memo 的实际使用场景和代码示例"     │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  ┌───────────────────────────────────────────────────┐ │
│  │ (•) 🔬 深入技术原理 ← Selected                   │ │
│  │     "深入分析 React.memo 的内部实现和比较机制"     │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  ┌───────────────────────────────────────────────────┐ │
│  │ ( ) ✏️ 自定义问题                                │ │
│  │ [输入你的问题...]                                 │ │
│  └───────────────────────────────────────────────────┘ │
│                                                         │
│  🤖 使用模型: GPT-4 ▼                                  │
│                                                         │
│                         [取消]  [开始探索]  ◄─ Click   │
└─────────────────────────────────────────────────────────┘
       │
       │ On Click "开始探索"
       ↓
Step 3: New Child Conversation Created
┌─────────────────────────────────────────┐
│ [React.memo 深入分析]  🤖 GPT-4 ▼      │ ◄─ Auto-generated title
│ ┌─────────────────────────────────────┐ │
│ │ 🔗 探索自: React 性能优化 > Depth 1 │ │ ◄─ Breadcrumb link
│ └─────────────────────────────────────┘ │
│                                         │
│ 👤 你  刚刚                             │
│ 深入分析 React.memo 的内部实现和        │
│ 比较机制                                │ ◄─ Auto-filled from template
│                                         │
│ 🤖 GPT-4  刚刚                          │
│ [AI 开始回复...]                        │
└─────────────────────────────────────────┘
AND
┌─────────────────────────────────────────┐
│ 📍 知识点 | 🔗 探索链 | 📊 图谱        │
│             ▲                           │
│             └─── Automatically switch to this tab
│                                         │
│ 探索链: React 性能优化                  │
│ ┌─────────────────────────────────────┐ │
│ │ 🔵 React 性能优化                   │ │
│ │   Depth 0                           │ │
│ │                                     │ │
│ │   ├─❓ React.memo()                │ │
│ │   │     ↓ (探索中) ◄─ Indicator   │ │
│ │   │   🔴 React.memo 深入分析       │ │
│ │   │      Depth 1                   │ │
│ │                                     │ │
│ │   ├─⚠️ useMemo                     │ │
│ │   └─✅ 虚拟列表                     │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
  Animation: Tree expands, 300ms Smart Animate
```

### Flow 5: 查看探索链流程

```
Flow 5: View Exploration Chain
────────────────────────────────────────────────────────────────

Step 1: Click "探索链" Tab in Knowledge Panel
┌─────────────────────────────────────────┐
│ 📍 知识点 | 🔗 探索链 | 📊 图谱        │
│              ▲                          │
│              └─── Click                 │
└─────────────────────────────────────────┘
       │
       ↓
Step 2: Exploration Chain Tree View
┌─────────────────────────────────────────┐
│ 🔗 探索链                               │
│                                         │
│ 选择探索链:                             │
│ ┌─────────────────────────────────────┐ │
│ │ (•) React 性能优化 (3 层)           │ │
│ │ ( ) TypeScript 类型系统 (2 层)      │ │
│ │ ( ) 虚拟 DOM 原理 (4 层)            │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ 🔵 React 性能优化                       │
│   Depth 0 · 3 知识点 · 2024-01-15      │
│   ├─❓ React.memo()                    │
│   │     ↓                               │
│   │   🔴 React.memo 深入分析           │
│   │      Depth 1 · 5 知识点            │
│   │      ├─❓ 浅比较原理                │
│   │      │     ↓                       │
│   │      │   🟠 浅比较原理深入         │
│   │      │      Depth 2 · 3 知识点     │
│   │      │      │                      │
│   │      │      [查看完整对话 →]  ◄─ Click
│   │      ├─⚠️ 使用场景                │
│   │      └─✅ 最佳实践                 │
│   ├─⚠️ useMemo                        │
│   └─✅ 虚拟列表                        │
│                                         │
│ [在知识探索器中查看 →]                  │
└─────────────────────────────────────────┘
       │
       │ On Click "[在知识探索器中查看 →]"
       ↓
Step 3: Navigate to Knowledge Explorer (Full Screen View)
(See section 3.3 Knowledge Explorer layout above)

Alternative: Click a specific conversation node
       │
       ↓
Step 4: Navigate to that conversation
┌─────────────────────────────────────────┐
│ [React.memo 深入分析]  🤖 GPT-4 ▼      │
│ ┌─────────────────────────────────────┐ │
│ │ 🔗 探索路径:                        │ │
│ │ React 性能优化 > React.memo 深入    │ │
│ │                     分析 (Depth 1)  │ │
│ │ [< 返回父对话] [查看完整探索链 >]   │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ [Conversation content...]               │
└─────────────────────────────────────────┘
  Animation: Slide from right, 300ms
```

---

## 🎭 交互动画规范

### Animation Timing

```
Interaction Type          Duration    Easing          Use Case
────────────────────────────────────────────────────────────────────
Instant                   0ms         -               Page navigation
Fast                      150ms       Ease Out        Button hover, tooltip
Normal                    200ms       Ease Out        Modal open, dropdown
Smooth                    300ms       Ease In Out     Panel slide, Smart Animate
Slow                      400ms       Ease In Out     Page transition (rare)
```

### Common Animations

#### 1. Button Hover
```
Initial State:
  background: Primary/500
  transform: scale(1)

Hover State (150ms, Ease Out):
  background: Primary/600
  transform: scale(1.02)

Active State (100ms):
  transform: scale(0.98)
```

#### 2. Modal Open/Close
```
Open (200ms, Ease Out):
  opacity: 0 → 1
  transform: scale(0.95) → scale(1)

Close (150ms, Ease In):
  opacity: 1 → 0
  transform: scale(1) → scale(0.95)
```

#### 3. Panel Slide In/Out
```
Slide In from Right (300ms, Ease In Out):
  transform: translateX(100%) → translateX(0)

Slide Out to Right (250ms, Ease In):
  transform: translateX(0) → translateX(100%)
```

#### 4. List Item Add (Knowledge Point)
```
New item appears (300ms):
  1. Slide down (Push existing items)
  2. Opacity: 0 → 1
  3. Scale: 0.95 → 1
  4. Pulse effect (×2):
     - Scale: 1 → 1.05 → 1 (200ms each)
     - Background: Normal → Highlight → Normal
```

#### 5. Knowledge Point Annotation Highlight
```
On Annotation Created (600ms total):
  Phase 1 (300ms): Underline draws from left to right
  Phase 2 (300ms): Icon fades in + scales up

Underline Animation:
  width: 0% → 100%
  border-color: Semantic color based on status
```

#### 6. Exploration Tree Expand
```
On New Child Added (300ms, Smart Animate):
  1. Parent node rotates arrow: ▶ → ▼
  2. Children container height: 0 → auto
  3. Connection lines draw downward
  4. Child node fades in + slides down
```

---

## 📱 响应式布局规范

### Breakpoints

```
Size              Width       Layout Changes
────────────────────────────────────────────────────────────────
Minimum           1024px      • Sidebar auto-collapsed (64px)
                              • Knowledge Panel hidden (toggle button)
                              • Main content expands

Recommended       1280px      • Default 3-column layout
                              • All panels visible
                              • Optimal UX

Large             1920px      • Content max-width: 1600px
                              • Centered with side margins
                              • No stretching beyond max-width
```

### Layout Calculations

#### 1024×768 (Minimum)
```
┌────┬─────────────────────────────────────┬───┐
│ 64 │             900px                   │ 60│ = 1024px
│ px │         Main Content                │px │
│    │                                     │   │
│ Si │                                     │ K │
│ de │                                     │ P │ ← Hidden (toggle)
│ ba │                                     │ an│
│ r  │                                     │ el│
└────┴─────────────────────────────────────┴───┘

Knowledge Panel Toggle Button:
  Position: Fixed, top-right
  Icon: 📍 (with badge count)
  Click: Slide panel in as overlay (320px)
```

#### 1280×800 (Recommended)
```
┌──────────┬──────────────────────────┬────────────┐
│   240px  │         800px            │   240px    │ = 1280px
│          │                          │            │
│ Sidebar  │      Main Content        │  Knowledge │
│          │                          │    Panel   │
│          │                          │            │
└──────────┴──────────────────────────┴────────────┘
```

#### 1920×1080 (Large)
```
┌────┬──────────┬──────────────────────────┬────────────┬────┐
│160 │   240px  │         960px            │   240px    │160 │ = 1920px
│ px │          │                          │            │ px │
│    │ Sidebar  │      Main Content        │  Knowledge │    │
│Mar │          │                          │    Panel   │Mar │
│gin │          │  (Max-width: 1600px)     │            │gin │
└────┴──────────┴──────────────────────────┴────────────┴────┘
```

---

## 🌙 暗色主题规范

### Color Mapping

```
Component          Light Mode        Dark Mode          Notes
────────────────────────────────────────────────────────────────────────
Background         #ffffff           #111827            Neutral/900
Surface            #f9fafb           #1f2937            Neutral/50 → 800
Border             #e5e7eb           #374151            Neutral/200 → 700
Text Primary       #111827           #f9fafb            Inverse
Text Secondary     #6b7280           #d1d5db            Neutral/500 → 300
Hover Background   #f3f4f6           #374151            Neutral/100 → 700
Selected           #eef2ff           #312e81            Primary/50 → 900

Semantic colors remain the same (already have sufficient contrast)
```

### Dark Mode Specific Adjustments

```
1. Reduce shadow intensity:
   Light: 0px 4px 6px rgba(0,0,0,0.1)
   Dark:  0px 4px 6px rgba(0,0,0,0.3)

2. Add subtle borders to cards (dark mode only):
   border: 1px solid Neutral/700

3. Slightly reduce white text opacity:
   Text Primary: rgba(249, 250, 251, 0.95) instead of full white

4. Increase contrast for code blocks:
   Light: bg:#f3f4f6
   Dark:  bg:#0d1117 (GitHub dark code bg)
```

---

## 🎯 关键交互状态总结

### Button States
- Default: Base color
- Hover: Darker shade + scale(1.02) + cursor pointer
- Active: scale(0.98)
- Disabled: Desaturated + cursor not-allowed + opacity:0.5

### Input States
- Default: Border Neutral/300
- Focus: Border Primary/500 + Shadow (0 0 0 3px Primary/50)
- Error: Border Error/500 + Error text below
- Disabled: Background Neutral/100 + cursor not-allowed

### Card States
- Default: Background Surface + Border subtle
- Hover: Shadow SM → MD + background slightly darker
- Selected: Left border (4px Primary/500) + background Primary/50
- Active (clicking): scale(0.98)

### Knowledge Point States
- Not Understood: Red border-bottom + ❓ icon
- Partially Understood: Orange border-bottom + ⚠️ icon
- Mastered: Green border-bottom + ✅ icon
- Hover: Tooltip with full details

---

## 📤 导出和交付清单

### For Developers

1. **Component Specs** (Figma Inspect Mode):
   - All spacing values (padding, gap, margins)
   - All color values (with semantic names)
   - All typography specs (family, size, weight, line-height)
   - Border radius values
   - Shadow specs

2. **Assets to Export**:
   - Logo (SVG): Multiple sizes (32px, 64px, 128px, 256px)
   - Icons (SVG): All custom icons at 24×24
   - Model logos (PNG + SVG): 40×40, 80×80
   - Favicons: 16×16, 32×32, 180×180, 512×512

3. **Design Tokens** (JSON format):
   ```json
   {
     "colors": {
       "primary-500": "#6366f1",
       "neutral-900": "#111827",
       ...
     },
     "spacing": {
       "1": "4px",
       "2": "8px",
       ...
     },
     "typography": {
       "heading-1": {
         "fontSize": "32px",
         "lineHeight": "40px",
         "fontWeight": "700"
       },
       ...
     }
   }
   ```

4. **Animation Specs Document**:
   - All animation durations and easings
   - Interaction state transitions
   - Loading states and skeletons

### Prototype Link Settings
- Enable commenting
- Enable Dev Mode access
- Share link: "Anyone with link can view"
- Presentation settings:
  - Start from: Welcome Screen
  - Hotspot hints: On hover
  - Background: Neutral/100

---

完成此文档后,你将拥有一个完整的、可交互的 Figma 原型,涵盖所有核心用户流程和交互细节!🎨
